<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Calendar</title>
	<link rel="stylesheet" type="text/css" href="calendar.css">
</head>
<body>
	<div class="container">
		<dl class="cld_current cld">
			<dt class="cld_top">
				<div class="skip"><!-- 7月 --></div>
				<div class="cld_title"><!-- 2016年8月 --></div>
			</dt>
			<dd class="cld_body">
				<ul class="cld_week">
					<li class="cld_week_cell cell">周一</li>
					<li class="cld_week_cell cell">周二</li>
					<li class="cld_week_cell cell">周三</li>
					<li class="cld_week_cell cell">周四</li>
					<li class="cld_week_cell cell">周五</li>
					<li class="cld_week_cell cell red">周六</li>
					<li class="cld_week_cell cell red">周日</li>
				</ul>
				<ul class="cld_date cld_cur_date">
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
				</ul>
			</dd>
			
		</dl>
		<dl class="cld_next cld">
			<dt class="cld_top">
				<div class="skip"><!-- 10月 --></div>
				<div class="cld_title"><!-- 2016年9月 --></div>
			</dt>
			<dd class="cld_body">
				<ul class="cld_week">
					<li class="cld_week_cell cell">周一</li>
					<li class="cld_week_cell cell">周二</li>
					<li class="cld_week_cell cell">周三</li>
					<li class="cld_week_cell cell">周四</li>
					<li class="cld_week_cell cell">周五</li>
					<li class="cld_week_cell cell red">周六</li>
					<li class="cld_week_cell cell red">周日</li>
				</ul>
				<ul class="cld_date cld_next_date">
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
					<li class="cld_day_cell cell"></li>
				</ul>
			</dd>
		</dl>
	</div>
	<script type="text/javascript">
		function fnFirstDayOfMonth(week, day){
		//返回本月第一天是星期几
			var day = (day % 7 == 0) ? 7 : (day % 7);
			while(day != 1){
				day--;
				week--;
				if(week == 0){
					week = 7;
				}
			}
			return week;
		}
		function fnDaysOfMonth(year, month){
		//返回本月总共多少天
			var daysOfMonth;
			switch(month){
				case 1:
				case 3:
				case 5:
				case 7:
				case 8:
				case 10:
				case 12:
					daysOfMonth = 31;
					break;
				case 4:
				case 6:
				case 9:
				case 11:
					daysOfMonth = 30;
					break;
				case 2:
					if(((year % 4 == 0) && (year % 100 != 0))
						|| (year % 400 == 0)){
						daysOfMonth = 29;
					}else{
						daysOfMonth = 28;
					}
					break;
			}
			return daysOfMonth;
		}
		function fnFirstDayOfNextMonth(week, day, year, month){
		//返回下一月第一天是星期几
			var firstDayOfMonth = fnFirstDayOfMonth(week, day);
			var daysOfMonth = fnDaysOfMonth(year, month);
			return (((firstDayOfMonth + daysOfMonth) % 7) == 0)? 7 :
					((firstDayOfMonth + daysOfMonth) % 7)
		}
		function fnFirstDayOfLastMonth(week, day, year, month){
		//返回上一月第一天是星期几
			var firstDay = fnFirstDayOfMonth(week, day);
			var lastDay = (firstDay - 1 == 0) ? 7 : (firstDay - 1);
			return fnFirstDayOfMonth(lastDay,fnDaysOfMonth((month==1)?(year-1):year,
				(month==1)?12:(month-1)));
		}
		
		function fnPutDayToCal(curCells,firstWeek,daysOfMonth,day){
		//放入日历
			for(var i = 0; i < curCells.length; i++){//清空日历
				curCells[i].innerHTML = '';
				curCells[i].style.color = '';
			}
			for(var i = firstWeek - 1,j = 1; j <= daysOfMonth; i++,j++){
				curCells[i].innerHTML = j;
				if(day){
					if(j == day){
						curCells[i].style.color = 'red';
					}else if(j > day){
						curCells[i].style.color = 'blue';
					}
				}
			}
		}
		var date = new Date(),//获取当天日期数据
			year = date.getFullYear(),
			month = date.getMonth() + 1,
			day = date.getDate(),
			week = date.getDay();
		var leftSkipMon = (month == 1) ? 12 : (month - 1),//初始化日期数据
			currentYear = year,
			currentMon = month,
			nextYear = (currentMon == 12) ? (year + 1) : year,
			nextMon = (currentMon == 12) ? 1 : (currentMon + 1),
			rightSkipMon = (nextMon == 12) ? 1 : (nextMon + 1);

		var skip = document.getElementsByClassName('skip');
		skip[0].innerHTML = (month - 1) + '月';
		skip[1].innerHTML = (month + 2) + '月';

		var title = document.getElementsByClassName('cld_title');
		title[0].innerHTML = year + '年' + month + '月';
		title[1].innerHTML = ((month == 12)?(year + 1):year) + '年' +
							 ((month == 12)?1:(month + 1))+ '月';
		
		var firstWeek = fnFirstDayOfMonth(week, day),
			daysOfMonth = fnDaysOfMonth(year, month);
		var curCal = document.getElementsByClassName("cld_cur_date")[0],
			curCells = curCal.getElementsByClassName("cell");	
		fnPutDayToCal(curCells,firstWeek,daysOfMonth,day);

		var firstWeek_next = fnFirstDayOfNextMonth(week, day, year, month),
			daysOfMonth_next = fnDaysOfMonth(year + 1, (month == 12)?1:(month+1));
		var nextCal = document.getElementsByClassName("cld_next_date")[0],
			nextCells = nextCal.getElementsByClassName("cell");
		fnPutDayToCal(nextCells,firstWeek_next,daysOfMonth_next);

		skip[0].onclick = function(){
			var skipMon = parseInt(this.innerHTML);

			firstWeek_next = firstWeek;
			firstWeek = fnFirstDayOfLastMonth(firstWeek, 1, currentYear, currentMon);

			leftSkipMon = (leftSkipMon == 1) ? 12 : (leftSkipMon - 1);
			currentYear = (currentMon == 1) ? (currentYear - 1) : currentYear;
			currentMon = (currentMon == 1) ? 12 : (currentMon - 1);
			nextYear = (nextMon == 1) ? (nextYear - 1) : nextYear;
			nextMon = (nextMon == 1) ? 12 : (nextMon - 1);
			rightSkipMon = (rightSkipMon == 1) ? 12 : (rightSkipMon - 1);		
			
			daysOfMonth = fnDaysOfMonth(currentYear,currentMon);
			daysOfMonth_next = fnDaysOfMonth(nextYear,nextMon);

			skip[0].innerHTML = leftSkipMon + '月';
			title[0].innerHTML = currentYear + '年' + currentMon + '月';
			skip[1].innerHTML = rightSkipMon + '月';
			title[1].innerHTML = nextYear + '年' + nextMon + '月';

			var curDate = ((currentMon == month) && (currentYear == year)) ?
						day : undefined;
			var nextDate = ((nextMon == month) && (nextYear == year)) ?
						day : undefined;
			fnPutDayToCal(curCells,firstWeek,daysOfMonth,curDate);
			fnPutDayToCal(nextCells,firstWeek_next,daysOfMonth_next,nextDate);
		}
		skip[1].onclick = function(){
			var skipMon = parseInt(this.innerHTML);

			firstWeek = firstWeek_next;
			firstWeek_next = fnFirstDayOfNextMonth(firstWeek_next, 1, nextYear, nextMon);

			leftSkipMon = (leftSkipMon == 12) ? 1 : (leftSkipMon + 1);
			currentYear = (currentMon == 12) ? (currentYear + 1) : currentYear;
			currentMon = (currentMon == 12) ? 1 : (currentMon + 1);
			nextYear = (nextMon == 12) ? (nextYear + 1) : nextYear;
			nextMon = (nextMon == 12) ? 1 : (nextMon + 1);
			rightSkipMon = (rightSkipMon == 12) ? 1 : (rightSkipMon + 1);

			daysOfMonth = fnDaysOfMonth(currentYear,currentMon);
			daysOfMonth_next = fnDaysOfMonth(nextYear,nextMon);
			
			skip[0].innerHTML = leftSkipMon + '月';
			title[0].innerHTML = currentYear + '年' + currentMon + '月';
			skip[1].innerHTML = rightSkipMon + '月';
			title[1].innerHTML = nextYear + '年' + nextMon + '月';

			var curDate = ((currentMon == month) && (currentYear == year)) ?
						day : undefined;
			var nextDate = ((nextMon == month) && (nextYear == year)) ?
						day : undefined;
			fnPutDayToCal(curCells,firstWeek,daysOfMonth,curDate);
			fnPutDayToCal(nextCells,firstWeek_next,daysOfMonth_next,nextDate);
		}
	</script>
</body>
</html>